suite: test secret generation
templates:
  - secret.yaml
release:
  name: local-dev
  namespace: demo
tests:
  - it: test default manifest
    set:
      fullnameOverride: "local-dev-budget-tracker-api"
    asserts:
      - isKind:
          of: Secret
      - matchRegex:
          path: metadata.name
          pattern: mongodb-credentials
      - equal:
          path: type
          value: Opaque
      - equal:
          path: data.host
          value: bW9uZ29kYjovL2xvY2FsLWRldi1tb25nb2RiLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWw6MjcwMTcv
      - equal:
          path: data.username
          value: cm9vdA==
      - equal:
          path: data.password
          value: cm9vdA==
